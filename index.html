<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Naveen Madushan | About</title>
    <link rel="icon" type="image/png" href="assets/profile%20picture.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['Inter', 'sans-serif'] },
                    colors: {
                        primary: '#6b46c1', primaryDark: '#553c9a', accent: '#9f7aea',
                        linkedin: '#0a66c2', whatsapp: '#25d366', github: '#24292e'
                    }
                }
            }
        }
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            background-color: #111827;
            color: #d1d5db;
        }

        .nav-scrolled {
            background: rgba(17, 24, 39, 0.9);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .icon-badge {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 48px;
            height: 48px;
            border-radius: 12px;
        }

        .active-nav {
            color: white !important;
            font-weight: 600;
            text-shadow: 0 0 10px rgba(107, 70, 193, 0.5);
        }

        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #111827;
        }

        ::-webkit-scrollbar-thumb {
            background: #374151;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #4b5563;
        }
    </style>
</head>

<body class="antialiased font-sans flex flex-col min-h-screen">
    <!-- Header -->
    <header class="fixed w-full top-0 z-50 transition-all duration-300" id="navbar">
        <div class="max-w-6xl mx-auto px-6 py-4 flex justify-between items-center relative">
            <a href="#about" class="flex items-center gap-3 group z-50">
                <div
                    class="w-10 h-10 rounded-full overflow-hidden border-2 border-gray-600 group-hover:border-primary transition-colors">
                    <img src="assets/profile%20picture.png" alt="Profile" class="w-full h-auto object-cover">
                </div>
            </a>
            <!-- Desktop Nav -->
            <nav class="hidden md:flex items-center gap-8 z-50">
                <a href="#about" class="text-sm font-medium text-gray-300 hover:text-white transition-colors">About</a>
                <a href="#skills"
                    class="text-sm font-medium text-gray-300 hover:text-white transition-colors">Skills</a>
                <a href="#projects"
                    class="text-sm font-medium text-gray-300 hover:text-white transition-colors">Projects</a>
                <a href="#contact"
                    class="px-5 py-2 text-sm font-medium text-white bg-primary hover:bg-primaryDark rounded-lg transition-colors shadow-lg shadow-primary/20">Contact</a>

            </nav>
            <button id="mobile-menu-btn" class="md:hidden text-gray-300 z-50 relative"><i
                    class="fa-solid fa-bars text-xl"></i></button>
            <!-- Mobile Menu -->
        </div>
    </header>

    <!-- Mobile Menu -->
    <div id="mobile-menu"
        class="fixed inset-0 bg-gray-900/98 backdrop-blur-xl flex-col justify-center items-center gap-8 hidden z-40">
        <a href="#about" class="text-2xl font-bold text-primary transition-colors">About</a>
        <a href="#skills" class="text-2xl font-bold text-white hover:text-primary transition-colors">Skills</a>
        <a href="#projects" class="text-2xl font-bold text-white hover:text-primary transition-colors">Projects</a>
        <a href="#contact"
            class="px-8 py-3 text-xl font-bold text-white bg-primary hover:bg-primaryDark rounded-xl transition-colors mt-4">Contact</a>
    </div>


    <main class="flex-grow pt-24">
        <section id="about" class="py-16 px-6">
            <div class="max-w-5xl mx-auto">
                <div class="text-center mb-16">
                    <span
                        class="px-4 py-1 rounded-full bg-gray-800 text-xs font-semibold text-gray-300 mb-6 inline-block">About
                        Me</span>
                    <h1 class="text-4xl md:text-5xl font-bold text-white tracking-tight">I am <span
                            class="text-accent">Naveen Madushan</span></h1>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-12 gap-10 lg:gap-16">
                    <div class="lg:col-span-7">
                        <p class="text-gray-400 mb-6 leading-relaxed text-sm md:text-base">
                            I am Naveen Madushan, a 23-year-old Electro Technology undergraduate at the <span
                                class="text-accent">Wayamba University of Sri Lanka</span>, specializing in the fields
                            of Electrical Engineering, Electronics, and Software Development.
                        </p>
                        <p class="text-gray-400 mb-8 leading-relaxed text-sm md:text-base">
                            My technical background includes hands-on experience in designing embedded systems with
                            ESP32 microcontrollers. I focus on bridging the
                            gap between hardware and software.
                        </p>
                        <div class="flex gap-4">
                            <a href="cv/cv.pdf" download="Naveen_Madushan_CV.pdf"
                                class="inline-flex items-center gap-2 px-6 py-3 bg-primary hover:bg-primaryDark text-white font-semibold rounded-xl transition-all shadow-lg shadow-primary/20 hover:shadow-primary/40 hover:-translate-y-1">
                                <i class="fa-solid fa-download"></i> Download CV
                            </a>
                        </div>
                    </div>

                    <div class="lg:col-span-5 flex items-center justify-center relative">
                        <!-- Decorative glow behind image -->
                        <div
                            class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[110%] h-[110%] bg-primary/20 blur-[80px] rounded-full z-0 pointer-events-none">
                        </div>

                        <!-- Profile Image -->
                        <div
                            class="relative z-10 w-full max-w-sm mx-auto rounded-3xl overflow-hidden border border-gray-700 shadow-2xl shadow-primary/20 group">
                            <img src="assets/profile%20picture.png" alt="Naveen Madushan"
                                class="w-full h-auto object-cover group-hover:scale-105 transition-transform duration-700">

                            <!-- Overlay gradient at the bottom for aesthetic blend -->
                            <div
                                class="absolute inset-x-0 bottom-0 h-1/3 bg-gradient-to-t from-gray-900 to-transparent opacity-80 z-10">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <section id="skills" class="py-16 px-6">
            <div class="max-w-5xl mx-auto">
                <div class="text-center mb-16">
                    <span
                        class="px-4 py-1 rounded-full bg-gray-800 text-xs font-semibold text-gray-300 mb-4 inline-block">Technical
                        Skills</span>
                    <h2 class="text-3xl md:text-4xl font-bold text-white mb-3">Software <span
                            class="text-accent">Skills</span></h2>
                </div>

                <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4">
                    <div
                        class="bg-skillIconBg border border-gray-700 p-4 rounded-xl flex flex-col items-center justify-center text-center hover:bg-gray-800 transition-colors">
                        <div
                            class="w-12 h-12 mb-3 bg-[#001E36] border border-gray-700 rounded-lg flex items-center justify-center">
                            <span class="text-[#31A8FF] font-bold text-xl">Ps</span>
                        </div>
                        <h4 class="text-white font-bold text-sm mb-1">Adobe Photoshop</h4>
                        <span class="text-[10px] text-gray-400">Advanced</span>
                    </div>

                    <div
                        class="bg-skillIconBg border border-gray-700 p-4 rounded-xl flex flex-col items-center justify-center text-center hover:bg-gray-800 transition-colors">
                        <div
                            class="w-12 h-12 mb-3 bg-[#001E36] border border-gray-700 rounded-lg flex items-center justify-center">
                            <span class="text-[#71C5FF] font-bold text-xl">Lr</span>
                        </div>
                        <h4 class="text-white font-bold text-sm mb-1">Adobe Lightroom</h4>
                        <span class="text-[10px] text-gray-400">Intermediate</span>
                    </div>

                    <div
                        class="bg-skillIconBg border border-gray-700 p-4 rounded-xl flex flex-col items-center justify-center text-center hover:bg-gray-800 transition-colors">
                        <div class="w-12 h-12 mb-3 bg-white rounded-lg flex items-center justify-center">
                            <span class="text-[#2D2D2D] font-bold text-sm">KiCad</span>
                        </div>
                        <h4 class="text-white font-bold text-sm mb-1">KiCad</h4>
                        <span class="text-[10px] text-gray-400">Intermediate</span>
                    </div>

                    <div
                        class="bg-skillIconBg border border-gray-700 p-4 rounded-xl flex flex-col items-center justify-center text-center hover:bg-gray-800 transition-colors">
                        <div class="w-12 h-12 mb-3 bg-[#2b579a] rounded-lg flex items-center justify-center">
                            <i class="fa-solid fa-file-word text-white text-2xl"></i>
                        </div>
                        <h4 class="text-white font-bold text-sm mb-1">MS Word</h4>
                        <span class="text-[10px] text-gray-400">Advanced</span>
                    </div>

                    <div
                        class="bg-skillIconBg border border-gray-700 p-4 rounded-xl flex flex-col items-center justify-center text-center hover:bg-gray-800 transition-colors">
                        <div class="w-12 h-12 mb-3 bg-[#217346] rounded-lg flex items-center justify-center">
                            <i class="fa-solid fa-file-excel text-white text-2xl"></i>
                        </div>
                        <h4 class="text-white font-bold text-sm mb-1">MS Excel</h4>
                        <span class="text-[10px] text-gray-400">Intermediate</span>
                    </div>

                    <div
                        class="bg-skillIconBg border border-gray-700 p-4 rounded-xl flex flex-col items-center justify-center text-center hover:bg-gray-800 transition-colors">
                        <div class="w-12 h-12 mb-3 bg-[#d24726] rounded-lg flex items-center justify-center">
                            <i class="fa-solid fa-file-powerpoint text-white text-2xl"></i>
                        </div>
                        <h4 class="text-white font-bold text-sm mb-1">MS PowerPoint</h4>
                        <span class="text-[10px] text-gray-400">Advanced</span>
                    </div>

                    <div
                        class="bg-skillIconBg border border-gray-700 p-4 rounded-xl flex flex-col items-center justify-center text-center hover:bg-gray-800 transition-colors">
                        <div class="w-12 h-12 mb-3 bg-[#3776AB] rounded-lg flex items-center justify-center">
                            <i class="fa-brands fa-python text-[#FFD43B] text-2xl"></i>
                        </div>
                        <h4 class="text-white font-bold text-sm mb-1">Python</h4>
                        <span class="text-[10px] text-gray-400">Intermediate</span>
                    </div>

                    <div
                        class="bg-skillIconBg border border-gray-700 p-4 rounded-xl flex flex-col items-center justify-center text-center hover:bg-gray-800 transition-colors">
                        <div class="w-12 h-12 mb-3 bg-[#A8B9CC] rounded-lg flex items-center justify-center">
                            <span class="text-[#004482] font-bold text-2xl font-serif">C</span>
                        </div>
                        <h4 class="text-white font-bold text-sm mb-1">C Programming</h4>
                        <span class="text-[10px] text-gray-400">Intermediate</span>
                    </div>

                    <div
                        class="bg-skillIconBg border border-gray-700 p-4 rounded-xl flex flex-col items-center justify-center text-center hover:bg-gray-800 transition-colors">
                        <div class="w-12 h-12 mb-3 bg-[#0284c7] rounded-lg flex items-center justify-center">
                            <i class="fa-solid fa-compass-drafting text-white text-2xl"></i>
                        </div>
                        <h4 class="text-white font-bold text-sm mb-1">AutoCAD</h4>
                        <span class="text-[10px] text-gray-400">Intermediate</span>
                    </div>
                </div>
            </div>
            </div>
        </section>

        <!-- Certifications Section -->
        <section class="py-16 px-6 bg-gray-900/50">
            <div class="max-w-6xl mx-auto">
                <div class="text-center mb-16">
                    <span
                        class="px-4 py-1 rounded-full bg-gray-800 text-xs font-semibold text-gray-300 mb-4 inline-block">Milestones</span>
                    <h2 class="text-3xl md:text-4xl font-bold text-white mb-3">Certifications & <span
                            class="text-accent">Achievements</span></h2>
                    <p class="text-gray-400 text-sm">Validating expertise through professional and industrial milestones
                    </p>
                </div>

                <div id="certifications-container" class="space-y-16">
                    <!-- Categories will be dynamically injected here -->
                </div>
            </div>
        </section>
        <section id="projects" class="py-16 px-6">
            <div class="max-w-6xl mx-auto">
                <div class="text-center mb-16">
                    <span
                        class="px-4 py-1 rounded-full bg-gray-800 text-xs font-semibold text-gray-300 mb-6 inline-block">Portfolio</span>
                    <h1 class="text-4xl md:text-5xl font-bold text-white tracking-tight">My Recent <span
                            class="text-accent">Projects</span></h1>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8" id="projects-grid">
                    <!-- Cards will be injected by JS -->
                </div>
            </div>
        </section>

        <!-- Project Modal -->
        <div id="project-modal"
            class="fixed inset-0 z-[60] bg-gray-900/95 backdrop-blur-md hidden opacity-0 transition-opacity duration-300 flex items-center justify-center p-4 overflow-y-auto">
            <div class="bg-[#1f2937] border border-gray-700 rounded-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto relative transform scale-95 transition-transform duration-300"
                id="modal-content-wrapper">
                <button onclick="closeProjectModal()"
                    class="absolute top-4 right-4 w-10 h-10 bg-gray-800 rounded-full text-gray-400 hover:text-white flex items-center justify-center transition-colors z-10 border border-gray-700">
                    <i class="fa-solid fa-xmark"></i>
                </button>

                <div class="p-6 md:p-8">
                    <h2 id="modal-title" class="text-3xl font-bold text-white mb-6 pr-12">Project Title</h2>

                    <!-- Image Gallery -->
                    <div class="mb-8">
                        <div id="modal-main-image-container"
                            class="w-full h-64 md:h-96 rounded-xl overflow-hidden mb-4 border border-gray-700 bg-gray-800 flex items-center justify-center">
                            <img id="modal-main-image" src="" alt="Main Project Image"
                                class="max-w-full max-h-full object-contain">
                        </div>
                        <div id="modal-thumbnails" class="flex gap-4 overflow-x-auto pb-2 custom-scrollbar">
                            <!-- Thumbnails injected here -->
                        </div>
                    </div>

                    <!-- Project Details -->
                    <div id="modal-details"
                        class="prose prose-invert max-w-none prose-p:text-gray-400 prose-headings:text-white prose-a:text-primary">
                        <!-- Full text injected here -->
                    </div>
                </div>
            </div>
        </div>
        <section id="contact" class="py-16 px-6">
            <div class="max-w-5xl mx-auto">
                <div class="text-center mb-16">
                    <span
                        class="px-4 py-1 rounded-full bg-primary/20 text-xs font-semibold text-primary mb-4 inline-block">Let's
                        Connect</span>
                    <h2 class="text-3xl md:text-5xl font-bold text-white mb-3">Get In <span
                            class="text-accent">Touch</span></h2>
                    <p class="text-gray-400 text-sm">Have a project in mind? Let's work together to bring your ideas to
                        life</p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <!-- Contact Info -->
                    <div
                        class="bg-primary rounded-3xl p-8 lg:p-10 relative overflow-hidden flex flex-col justify-between">
                        <div
                            class="absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full blur-[80px] -translate-y-1/2 translate-x-1/2">
                        </div>
                        <div class="relative z-10">
                            <h3 class="text-2xl font-bold text-white mb-4">Contact Information</h3>
                            <p class="text-white/80 text-sm mb-10 leading-relaxed max-w-sm">
                                Ready to start your next electronics project? I'm just a message away. Let's create
                                something amazing together!
                            </p>

                            <div class="space-y-6">
                                <div class="flex items-start gap-4">
                                    <div
                                        class="w-10 h-10 rounded-lg bg-white/10 flex items-center justify-center shrink-0">
                                        <i class="fa-solid fa-envelope text-white"></i>
                                    </div>
                                    <div>
                                        <p class="text-white font-bold text-sm">Email</p>
                                        <p class="text-white/80 text-sm">naveenmadushan08@gmail.com</p>
                                    </div>
                                </div>
                                <div class="flex items-start gap-4">
                                    <div
                                        class="w-10 h-10 rounded-lg bg-white/10 flex items-center justify-center shrink-0">
                                        <i class="fa-solid fa-location-dot text-white"></i>
                                    </div>
                                    <div>
                                        <p class="text-white font-bold text-sm">Location</p>
                                        <p class="text-white/80 text-sm">Dodamgoda, Western Province</p>
                                    </div>
                                </div>
                                <div class="flex items-start gap-4">
                                    <div
                                        class="w-10 h-10 rounded-lg bg-white/10 flex items-center justify-center shrink-0">
                                        <i class="fa-solid fa-phone text-white"></i>
                                    </div>
                                    <div>
                                        <p class="text-white font-bold text-sm">Phone / WhatsApp</p>
                                        <p class="text-white/80 text-sm">+94 75 671 6704</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="mt-12 relative z-10">
                            <p class="text-white text-sm font-bold mb-4">Connect With Me</p>
                            <div class="flex gap-3">
                                <a href="https://github.com/naviijayZ/" target="_blank"
                                    class="w-10 h-10 rounded-full bg-white/10 flex items-center justify-center text-white hover:bg-white/20 transition"><i
                                        class="fa-brands fa-github"></i></a>
                                <a href="https://www.linkedin.com/in/naveen-madushan/" target="_blank"
                                    class="w-10 h-10 rounded-full bg-white/10 flex items-center justify-center text-white hover:bg-white/20 transition"><i
                                        class="fa-brands fa-linkedin-in"></i></a>
                            </div>
                        </div>
                    </div>

                    <!-- Contact Form -->
                    <div class="bg-[#1f2937] border border-gray-700 rounded-3xl p-8 lg:p-10">
                        <form action="https://api.web3forms.com/submit" method="POST">
                            <!-- Web3Forms Access Key -->
                            <input type="hidden" name="access_key" value="f2a0e19b-4972-429f-b7bb-e1f8a2c7b0a4">
                            <div class="space-y-6">
                                <div>
                                    <label class="block text-white text-sm font-bold mb-2">Name</label>
                                    <input type="text" name="name" placeholder="John Doe"
                                        class="w-full bg-[#111827] border border-gray-700 rounded-lg px-4 py-3 text-white text-sm focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary transition-colors"
                                        required>
                                </div>
                                <div>
                                    <label class="block text-white text-sm font-bold mb-2">Email</label>
                                    <input type="email" name="email" placeholder="john@example.com"
                                        class="w-full bg-[#111827] border border-gray-700 rounded-lg px-4 py-3 text-white text-sm focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary transition-colors"
                                        required>
                                </div>
                                <div>
                                    <label class="block text-white text-sm font-bold mb-2">Subject</label>
                                    <input type="text" name="subject" placeholder="Project Discussion"
                                        class="w-full bg-[#111827] border border-gray-700 rounded-lg px-4 py-3 text-white text-sm focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary transition-colors"
                                        required>
                                </div>
                                <div>
                                    <label class="block text-white text-sm font-bold mb-2">Message</label>
                                    <textarea rows="4" name="message" placeholder="Tell me about your project..."
                                        class="w-full bg-[#111827] border border-gray-700 rounded-lg px-4 py-3 text-white text-sm focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary transition-colors resize-none"
                                        required></textarea>
                                </div>
                                <button type="submit"
                                    class="w-full py-3.5 bg-primary hover:bg-primaryDark text-white font-bold rounded-lg transition-colors flex items-center justify-center gap-2">
                                    Send Message <i class="fa-solid fa-arrow-right"></i>
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Lightbox Modal -->
    <div id="lightbox"
        class="fixed inset-0 z-[60] bg-gray-900/98 backdrop-blur-md hidden opacity-0 transition-opacity duration-300 flex items-center justify-center p-4">
        <button onclick="closeLightbox()"
            class="absolute top-4 right-4 w-10 h-10 bg-gray-800 rounded-full text-gray-400 hover:text-white flex items-center justify-center transition-colors z-10 border border-gray-700">
            <i class="fa-solid fa-xmark"></i>
        </button>
        <div class="absolute top-4 left-4 flex gap-4 z-10">
            <button onclick="rotateLightbox(-90)"
                class="w-10 h-10 bg-gray-800 rounded-lg text-gray-400 hover:text-white flex items-center justify-center transition-colors border border-gray-700"
                title="Rotate Left">
                <i class="fa-solid fa-rotate-left"></i>
            </button>
            <button onclick="rotateLightbox(90)"
                class="w-10 h-10 bg-gray-800 rounded-lg text-gray-400 hover:text-white flex items-center justify-center transition-colors border border-gray-700"
                title="Rotate Right">
                <i class="fa-solid fa-rotate-right"></i>
            </button>
        </div>

        <div class="w-full max-w-4xl max-h-[90vh] flex flex-col items-center justify-center relative overflow-hidden">
            <img id="lightbox-img" src="" alt="Certificate"
                class="max-w-full max-h-[85vh] object-contain transition-transform duration-300 transform"
                style="--rotation: 0deg;">
            <p id="lightbox-caption" class="text-white mt-4 font-semibold text-lg text-center"></p>
        </div>
    </div>

    <!-- Floating Socials -->
    <div
        class="flex fixed left-2 lg:left-6 top-1/2 transform -translate-y-1/2 flex-col gap-3 z-40 scale-75 lg:scale-100 origin-left">
        <a href="https://wa.me/94756716704" target="_blank"
            class="icon-badge bg-whatsapp text-white text-xl hover:scale-110 transition-transform shadow-lg"><i
                class="fa-brands fa-whatsapp"></i></a>
        <a href="https://www.linkedin.com/in/naveen-madushan/" target="_blank"
            class="icon-badge bg-linkedin text-white text-xl hover:scale-110 transition-transform shadow-lg"><i
                class="fa-brands fa-linkedin-in"></i></a>
        <a href="https://github.com/naviijayZ/" target="_blank"
            class="icon-badge bg-github text-white text-xl hover:scale-110 transition-transform shadow-lg border border-gray-700"><i
                class="fa-brands fa-github"></i></a>
    </div>

    <footer class="bg-[#111827] border-t border-gray-800 py-6 text-center mt-auto">
        <p class="text-sm text-gray-500">&copy; 2026codezence.</p>
    </footer>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['Inter', 'sans-serif'] },
                    colors: {
                        primary: '#6b46c1', primaryDark: '#553c9a', accent: '#9f7aea',
                        linkedin: '#0a66c2', whatsapp: '#25d366', github: '#24292e'
                    }
                }
            }
        }

        window.addEventListener('scroll', () => {
            const nav = document.getElementById('navbar');
            if (window.scrollY > 20) nav.classList.add('nav-scrolled');
            else nav.classList.remove('nav-scrolled');
        });

        // Intersection Observer for Active Nav highlight
        const sections = document.querySelectorAll('section[id]');
        const navLinksDesktop = document.querySelectorAll('nav a');

        const observerOptions = {
            root: null,
            rootMargin: '-20% 0px -60% 0px',
            threshold: 0
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const currentId = entry.target.getAttribute('id');
                    navLinksDesktop.forEach(link => {
                        link.classList.remove('active-nav');
                        if (link.getAttribute('href') === '#' + currentId) {
                            link.classList.add('active-nav');
                        }
                    });
                }
            });
        }, observerOptions);

        sections.forEach(sec => observer.observe(sec));

        // Mobile menu toggle
        const mobileBtn = document.getElementById('mobile-menu-btn');
        const mobileMenu = document.getElementById('mobile-menu');
        const menuIcon = mobileBtn.querySelector('i');

        mobileBtn.addEventListener('click', () => {
            if (mobileMenu.classList.contains('hidden')) {
                mobileMenu.classList.remove('hidden');
                mobileMenu.classList.add('flex');
                menuIcon.classList.remove('fa-bars');
                menuIcon.classList.add('fa-xmark');
                document.body.style.overflow = 'hidden';
            } else {
                mobileMenu.classList.add('hidden');
                mobileMenu.classList.remove('flex');
                menuIcon.classList.remove('fa-xmark');
                menuIcon.classList.add('fa-bars');
                document.body.style.overflow = '';
            }
        });

        // Close mobile menu on link click
        document.querySelectorAll('#mobile-menu a').forEach(link => {
            link.addEventListener('click', () => {
                mobileMenu.classList.add('hidden');
                mobileMenu.classList.remove('flex');
                menuIcon.classList.remove('fa-xmark');
                menuIcon.classList.add('fa-bars');
                document.body.style.overflow = '';
            });
        });

        // Projects Data & Modal Logic
        const projectsData = [
            {
                id: 'project-0',
                title: 'Project T.R.V: Prototype Tourist Recreation Vehicle',
                thumbnail: 'project/project 0/1738641584147.jpg',
                reportLink: 'project/project 0/mini project final report.pdf',
                tags: ['Renewable Energy', 'Power Systems', 'Solar', 'Off-Grid'],
                shortIntro: 'A multidisciplinary engineering initiative aimed at revolutionizing Sri Lankaâ€™s tourism infrastructure with a sustainable off-grid design.',
                images: [

                    'project/project 0/1738641584147.jpg',
                    'project/project 0/1738641584278.jpg',
                    'project/project 0/1754229651832.jpg',
                    'project/project 0/1754229685811.jpg',
                    'project/project 0/1736673885340.jpg',
                ],
                fullText: `
                    <h4 class="text-white font-bold mb-2 text-lg">Overview</h4>
                    <p class="text-gray-300 text-sm mb-6 leading-relaxed">Project T.R.V is a multidisciplinary engineering initiative aimed at revolutionizing Sri Lankaâ€™s tourism infrastructure. This project involved the conceptualization and prototype design of a Tourist Recreation Vehicle (TRV), specifically engineered to provide an affordable, safe, and premium off-grid travel experience. The design integrates modern amenities with sustainable energy solutions to meet the demands of eco-conscious travelers.</p>
                    
                    <h4 class="text-white font-bold mb-2 text-lg">Core Design Features</h4>
                    <ul class="list-disc pl-5 text-gray-300 text-sm mb-6 space-y-2">
                        <li><strong class="text-white">Modular Living Space:</strong> Integrated kitchenette and washroom facilities optimized for space efficiency and ergonomic comfort.</li>
                        <li><strong class="text-white">Off-Grid Power System:</strong> A robust solar-powered energy grid designed to support all internal electronics and appliances without relying on external power sources.</li>
                        <li><strong class="text-white">Safety & Compliance:</strong> Engineered with strict adherence to passenger safety standards and structural integrity for long-distance travel across diverse terrains.</li>
                    </ul>

                    <h4 class="text-white font-bold mb-2 text-lg">Technical Specialization: Electrical Power Systems</h4>
                    <p class="text-gray-300 text-sm mb-6 leading-relaxed">As a core part of the engineering team, I led the Electrical Power Profiling and System Sizing. This involved rigorous mathematical modeling and simulations to ensure the vehicle's energy reliability:</p>
                    <ul class="list-disc pl-5 text-gray-300 text-sm mb-6 space-y-2">
                        <li><strong class="text-white">Load Analysis:</strong> Conducted comprehensive power requirements calculations for lighting, water pumps, refrigeration, and auxiliary electronics.</li>
                        <li><strong class="text-white">Photovoltaic (PV) Sizing:</strong> Determined optimal solar panel wattage and mounting configurations to maximize energy harvest under varying tropical weather conditions.</li>
                        <li><strong class="text-white">Energy Storage System (ESS):</strong> Calculated the required battery bank capacity to sustain the vehicleâ€™s energy demands throughout the night and during low-sunlight periods.</li>
                        <li><strong class="text-white">Hybrid Power Management:</strong> Sized the backup generator output and inverter capacity to handle peak loads and ensure a seamless transition between power sources.</li>
                    </ul>

                    <h4 class="text-white font-bold mb-2 text-lg">Key Learning Outcomes</h4>
                    <p class="text-gray-300 text-sm mb-6 leading-relaxed">This project provided hands-on experience in Renewable Energy Integration, Power System Design, and Complex Problem Solving. It required a deep understanding of electrical load balancing, teamwork, and bridging the gap between theoretical calculations and practical vehicle design.</p>
                `
            },
            {
                id: 'project-1',
                title: 'Autonomous Line Following Robot',
                thumbnail: 'project/project 1/1737699972523.jpg',
                tags: ['Arduino', 'PID Control', 'Robotics', 'Embedded C', 'IR Array'],
                shortIntro: 'Successfully designed and engineered an autonomous line-following robot to compete in the University Robotics Competition showing extreme precision with PID controls.',
                images: [
                    'project/project 1/1737699972523.jpg',
                    'project/project 1/1737699973659.jpg'
                ],
                fullText: `
                    <h4 class="text-white font-bold mb-2 text-lg">Overview</h4>
                    <p class="text-gray-300 text-sm mb-6 leading-relaxed">Successfully designed and engineered an autonomous line-following robot to compete in the University Robotics Competition. This project focused on creating a high-speed, stable, and precise robot capable of navigating complex tracks with sharp turns and intersections using advanced sensor fusion and control logic.</p>
                    
                    <h4 class="text-white font-bold mb-2 text-lg">Technical Specifications & Features</h4>
                    <ul class="list-disc pl-5 text-gray-300 text-sm mb-6 space-y-2">
                        <li><strong class="text-white">Precision Navigation:</strong> Integrated a high-density Infrared (IR) sensor array to detect path deviations with millisecond accuracy.</li>
                        <li><strong class="text-white">Advanced Control Logic:</strong> Implemented a PID (Proportional-Integral-Derivative)  to ensure smooth movements, prevent overshooting, and maintain high speeds during straight paths.</li>
                        <li><strong class="text-white">Power & Drive System:</strong> Optimized with high-RPM geared DC motors and a dedicated motor driver L298Nfor rapid response times.</li>
                        <li><strong class="text-white">Robust Calibration:</strong> Developed a custom calibration routine to adapt to varying lighting conditions and surface reflections on the competition track.</li>
                    </ul>

                    <h4 class="text-white font-bold mb-2 text-lg">The Development Experience</h4>
                    <p class="text-gray-300 text-sm mb-6 leading-relaxed">This project was an end-to-end engineering journeyâ€”from the  chassis design to the final code optimization. It challenged our team to solve real-world problems in Hardware Integration, Algorithm Optimization, and Real-time Processing.</p>

                    <h4 class="text-white font-bold mb-2 text-lg">Key Outcomes</h4>
                    <p class="text-gray-300 text-sm mb-6 leading-relaxed">The robot demonstrated exceptional path-following accuracy and reliability under competition pressure. This project solidified my expertise in robotics, control systems, and embedded C programming.</p>
                `
            },
            {
                id: 'project-2',
                title: 'Smart Electricity Management & Remote Billing System',
                thumbnail: 'project/project 2/IMG-20250921-WA0046.jpg',
                tags: ['ESP32', 'IoT', 'C++', 'Cloud Network'],
                shortIntro: 'Successfully showcased at Waya InnoFest 2025, this project introduces an innovative solution for modernizing energy infrastructure bridging utility providers and consumers.',
                images: [
                    'project/project 2/IMG-20250921-WA0046.jpg',
                    'project/project 2/1760003197149.jpg',
                    'project/project 2/IMG-20250921-WA0058.jpg',
                    'project/project 2/WhatsApp Image 2025-09-19 at 19.53.49_21fff120.jpg',
                    'project/project 2/WhatsApp Image 2026-02-21 at 7.03.43 PM (1).jpeg',
                    'project/project 2/WhatsApp Image 2026-02-21 at 7.03.43 PM.jpeg',
                    'project/project 2/WhatsApp Image 2026-02-21 at 7.03.44 PM.jpeg'
                ],
                fullText: `
                    <h4 class="text-white font-bold mb-2 text-lg">Overview</h4>
                    <p class="text-gray-300 text-sm mb-6 leading-relaxed">Successfully showcased at Waya InnoFest 2025, this project introduces an innovative solution for modernizing energy infrastructure. The Smart Electricity Control System is an integrated IoT platform designed to bridge the gap between utility providers and consumers, ensuring energy efficiency, billing transparency, and seamless remote management.</p>
                    
                    <h4 class="text-white font-bold mb-2 text-lg">The Solution</h4>
                    <p class="text-gray-300 text-sm mb-6 leading-relaxed">Our system replaces traditional manual billing with a centralized, cloud-based monitoring and control unit. It empowers utility companies to manage the entire power distribution network through a custom-built web interface, significantly reducing operational costs and human error.</p>

                    <h4 class="text-white font-bold mb-2 text-lg">Key Technical Features</h4>
                    <ul class="list-disc pl-5 text-gray-300 text-sm mb-6 space-y-2">
                        <li><strong class="text-white">Real-Time Power Analytics:</strong> Continuous monitoring of electricity consumption per household, providing granular data for both users and providers.</li>
                        <li><strong class="text-white">Automated Billing & Revenue Protection:</strong> Integrated tracking of payment statuses with a direct link to the power supply.</li>
                        <li><strong class="text-white">Remote Load Control:</strong> Capability to remotely disconnect or reconnect electricity supply via encrypted network signals, specifically designed to handle overdue payments or maintenance.</li>
                        <li><strong class="text-white">Intelligent Notification Engine:</strong> An automated system that dispatches warning alerts to users regarding high usage or pending bills to ensure uninterrupted service.</li>
                        <li><strong class="text-white">Centralized User Management:</strong> A secure dashboard for utility providers to add users, monitor load statistics, and analyze consumption patterns using real-time data visualization.</li>
                    </ul>

                    <h4 class="text-white font-bold mb-2 text-lg">Technical Architecture</h4>
                    <p class="text-gray-300 text-sm mb-6 leading-relaxed">The system consists of edge devices (Smart Meters) installed at the consumer end, which communicate with a secure central server. Using real-time network communication, the web platform sends control signals to the hardware, enabling instantaneous response and manual override capabilities from any location.</p>

                    <h4 class="text-white font-bold mb-2 text-lg">Impact & Vision</h4>
                    <p class="text-gray-300 text-sm mb-6 leading-relaxed">This project serves as a foundation for Smart City Infrastructure. By preventing electricity misuse and automating the billing cycle, it promotes a sustainable energy culture. The platform is built to be scalable and secure, making it a viable solution for large-scale urban energy management.</p>
                `
            },
            {
                id: 'project-3',
                title: 'IoT-Based Smart Greenhouse Monitoring System',
                thumbnail: 'project/project 3/Screenshot 2025-12-09 181655.png',
                reportLink: 'project/project 3/Group 6  - design report.pdf',
                tags: ['IoT', 'ESP32', 'Control Systems', 'Sensors'],
                shortIntro: 'Developed as a group project, this system provides an autonomous solution for modern agriculture using sensors and real-time control.',
                images: [
                    'project/project 3/Screenshot 2025-12-09 181655.png',
                    'project/project 3/IMG-20251209-WA0030.jpg',
                    'project/project 3/IMG-20251209-WA0038.jpg'
                ],
                fullText: `
                    <h4 class="text-white font-bold mb-2 text-lg">Overview</h4>
                    <p class="text-gray-300 text-sm mb-6 leading-relaxed">Developed as a group project for the Instrumentation module, this system provides an autonomous solution for modern agriculture. The project addresses the challenges of manual greenhouse management by using sensors and real-time control to maintain an ideal growing environment without human intervention.</p>
                    
                    <h4 class="text-white font-bold mb-2 text-lg">Core Functionalities</h4>
                    <ul class="list-disc pl-5 text-gray-300 text-sm mb-6 space-y-2">
                        <li><strong class="text-white">Automated Climate Control:</strong> The system continuously monitors temperature and humidity. If the temperature exceeds 40Â°C or humidity falls below 60%, it automatically triggers a fogger valve and a pressure pump to stabilize the environment.</li>
                        <li><strong class="text-white">Intelligent Water Management:</strong> Using an ultrasonic sensor, the system tracks the water level in the tank. When the level drops below 50%, the refilling motor (M1) is activated automatically to ensure a steady water supply.</li>
                        <li><strong class="text-white">Web-Based Monitoring:</strong> Designed a real-time dashboard that allows users to monitor environmental data (Temperature, Humidity, Tank Level) and manually control devices through a local network.</li>
                        <li><strong class="text-white">Safety & Efficiency:</strong> The control logic includes safety protocols to prevent irrigation or pump activation if the water level is critically low (< 50%), protecting the hardware from damage.</li>
                    </ul>

                    <h4 class="text-white font-bold mb-2 text-lg">Technical Specifications</h4>
                    <ul class="list-disc pl-5 text-gray-300 text-sm mb-6 space-y-2">
                        <li><strong class="text-white">Microcontroller:</strong> ESP32 (Used for central processing and Wi-Fi connectivity).</li>
                        <li><strong class="text-white">Sensors:</strong> Industrial DHT11 (Temperature/Humidity) and Ultrasonic sensor (Water Level).</li>
                        <li><strong class="text-white">Control Unit:</strong> Three-channel relay module integrated with transistors for reliable switching.</li>
                        <li><strong class="text-white">Display:</strong> Integrated LED dashboard for physical status indication.</li>
                    </ul>

                    <h4 class="text-white font-bold mb-2 text-lg">Key Results</h4>
                    <p class="text-gray-300 text-sm mb-6 leading-relaxed">The system successfully demonstrated its ability to maintain consistent environmental conditions, reducing manual labor and conserving water through precision automation. It serves as a scalable prototype for smart city agriculture and automated farming.</p>
                `
            },
            {
                id: 'project-4',
                title: 'Project 4',
                thumbnail: 'project/project 4/upcoming.png',
                shortIntro: '[RESTRICTED ACCESS]. Launching late 2026.',
                images: [
                    'project/project 4/upcoming.png'
                ],
                fullText: `
                    <div class="flex flex-col items-center justify-center py-12 text-center">
                        <i class="fa-solid fa-user-secret text-6xl text-primary mb-6 drop-shadow-[0_0_15px_rgba(107,70,193,0.5)]"></i>
                        <h4 class="text-white font-bold mb-4 text-2xl tracking-widest text-red-500 uppercase">Classified Project</h4>
                        <div class="w-24 h-1 bg-red-500/50 rounded-full mb-8"></div>
                        <p class="text-gray-300 text-lg mb-6 leading-relaxed max-w-2xl mx-auto">This project is currently under active development. .</p>
                        <div class="inline-flex items-center gap-3 px-6 py-3 bg-red-500/10 border border-red-500/20 text-red-400 rounded-xl font-mono text-sm">
                            <i class="fa-solid fa-spinner fa-spin"></i> Status: uploading...
                        </div>
                    </div>
                `
            }
        ];

        // Render Cards
        const grid = document.getElementById('projects-grid');
        projectsData.forEach(p => {
            const tagsHTML = (p.tags || []).map(tag => `<span class="text-xs font-medium px-2.5 py-1 bg-[#111827] text-gray-300 rounded border border-gray-700">${tag}</span>`).join('');
            grid.innerHTML += `
                <div class="bg-[#1f2937] border border-gray-700 rounded-2xl overflow-hidden hover:border-primary transition duration-300 group flex flex-col cursor-pointer" onclick="openProjectModal('${p.id}')">
                    <div class="h-48 overflow-hidden relative">
                        <img src="${p.thumbnail}" alt="${p.title}" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500">
                        <div class="absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 flex items-center justify-center transition-opacity duration-300">
                            <span class="px-4 py-2 bg-primary text-white text-sm font-bold rounded-lg shadow-lg">Read More <i class="fa-solid fa-arrow-right ml-1"></i></span>
                        </div>
                    </div>
                    <div class="p-6 flex-grow flex flex-col">
                        <h3 class="text-xl font-bold text-white mb-2">${p.title}</h3>
                        <p class="text-gray-400 text-sm mb-4 line-clamp-3">${p.shortIntro}</p>
                        <div class="flex flex-wrap gap-2 mb-4 mt-auto">
                            ${tagsHTML}
                        </div>
                    </div>
                </div>
            `;
        });

        // Modal Elements
        const modal = document.getElementById('project-modal');
        const modalWrapper = document.getElementById('modal-content-wrapper');
        const modalTitle = document.getElementById('modal-title');
        const modalMainImage = document.getElementById('modal-main-image');
        const modalThumbnails = document.getElementById('modal-thumbnails');
        const modalDetails = document.getElementById('modal-details');

        function openProjectModal(id) {
            const p = projectsData.find(project => project.id === id);
            if (!p) return;

            // Populate Text
            modalTitle.innerText = p.title;

            let extraContent = '';
            if (p.reportLink) {
                extraContent = `
                    <div class="mt-8 pt-6 border-t border-gray-700">
                        <a href="${p.reportLink}" target="_blank" class="inline-flex items-center gap-2 px-6 py-3 bg-primary hover:bg-primaryDark text-white font-bold rounded-lg transition-colors shadow-lg shadow-primary/20">
                            <i class="fa-solid fa-file-pdf text-xl"></i> View Final Report
                        </a>
                    </div>
                `;
            }

            modalDetails.innerHTML = p.fullText + extraContent;

            // Populate Images
            modalMainImage.src = p.images[0];
            modalThumbnails.innerHTML = p.images.map((imgSrc, index) => `
                <button onclick="document.getElementById('modal-main-image').src='${imgSrc}'" class="flex-shrink-0 w-24 h-16 rounded-lg overflow-hidden border-2 border-transparent focus:border-primary hover:border-gray-500 transition-colors">
                    <img src="${imgSrc}" class="w-full h-full object-cover">
                </button>
            `).join('');

            // Show Modal
            modal.classList.remove('hidden');
            document.body.style.overflow = 'hidden';

            // Trigger animation
            setTimeout(() => {
                modal.classList.remove('opacity-0');
                modalWrapper.classList.remove('scale-95');
            }, 10);
        }

        function closeProjectModal() {
            modal.classList.add('opacity-0');
            modalWrapper.classList.add('scale-95');

            setTimeout(() => {
                modal.classList.add('hidden');
                document.body.style.overflow = '';
            }, 300); // Wait for transition
        }

        // Close on background click
        modal.addEventListener('click', (e) => {
            if (e.target === modal) {
                closeProjectModal();
            }
        });

        // Certifications Data
        const certData = [
            // 1. University Achievements
            { cat: "University & Innovation Achievements", name: "Wayamba University Engineering Technology Project Showcase (Waya InnoFest 2025)", inst: "Wayamba University", year: "2025", img: "assets/certificates/uni certificate 1.png" },
            { cat: "University & Innovation Achievements", name: "Wayamba University Engineering Technology Symposium (WUETecS 2025): Certificate of Appreciation", inst: "WUETecS", year: "2025", img: "assets/certificates/uni certificate 2.png" },
            { cat: "University & Innovation Achievements", name: "Waya Robot Competition 1.0: Team 'Nano Ninja'", inst: "Wayamba University", year: "Nov 2024", img: "assets/certificates/uni certificate 3.png" },
            { cat: "University & Innovation Achievements", name: "Sahasak Nimavum 2016: 'Safety Umbrella' Project", inst: "Sahasak Nimavum", year: "2016", img: "assets/certificates/sahasak nimaum.png" },

            // 2. Experience
            { cat: "Industrial Training & Experience", name: "Computer Network Technician", inst: "Ministry of Power and Energy", year: "Feb 2023 - May 2023", img: "assets/certificates/training 1.png" },
            { cat: "Industrial Training & Experience", name: "Hardware and Networking", inst: "Sankha Computers", year: "May 2023 - July 2023", img: "assets/certificates/training 2.png" },

            // 3. Professional Certifications
            { cat: "Professional Certifications (IT & Networking)", name: "NVQ Level 4 - Computer Network Technician", inst: "Awarded", year: "Aug 2023", img: "assets/certificates/nvq 4.png" },
            { cat: "Professional Certifications (IT & Networking)", name: "NDG Linux Essentials", inst: "Cisco Networking Academy", year: "Nov 2023", img: "assets/certificates/linux essential.png" },
            { cat: "Professional Certifications (IT & Networking)", name: "NDG Linux Unhatched", inst: "Cisco Networking Academy", year: "Oct 2023", img: "assets/certificates/linux unhatteched.png" },
            { cat: "Professional Certifications (IT & Networking)", name: "IT Essentials", inst: "Cisco Networking Academy", year: "Apr 2023", img: "assets/certificates/it essential.png" },
            { cat: "Professional Certifications (IT & Networking)", name: "Networking Essentials", inst: "Cisco Networking Academy", year: "Mar 2023", img: "assets/certificates/networking essential.png" },
            { cat: "Professional Certifications (IT & Networking)", name: "Cybersecurity Essentials", inst: "Cisco Networking Academy", year: "Mar 2023", img: "assets/certificates/cybersecurity essential.png" },
            { cat: "Professional Certifications (IT & Networking)", name: "Introduction to Packet Tracer", inst: "Cisco Networking Academy", year: "Aug 2023", img: "assets/certificates/introduction to packettracer.png" },
            { cat: "Professional Certifications (IT & Networking)", name: "Introduction to Cybersecurity", inst: "Cisco Networking Academy", year: "Dec 2022", img: "assets/certificates/intoduction to cybersecurity.png" },
            { cat: "Professional Certifications (IT & Networking)", name: "Get Connected", inst: "Cisco Networking Academy", year: "Sep 2022", img: "assets/certificates/get connected.png" },
            { cat: "Professional Certifications (IT & Networking)", name: "Python for Beginners", inst: "University of Moratuwa", year: "-", img: "assets/certificates/python beginner uom.png" },
            { cat: "Professional Certifications (IT & Networking)", name: "Web Design for Beginners", inst: "University of Moratuwa", year: "-", img: "assets/certificates/web beginner uom.png" },

            // 4. Soft Skills
            { cat: "Soft Skills & Leadership", name: "Short Course in Listening and Speech", inst: "Open University of Sri Lanka", year: "Dec 2022", img: "assets/certificates/open uni english.png" },
            { cat: "Soft Skills & Leadership", name: "School Prefect", inst: "", year: "-", img: "assets/certificates/lerdership 2.png" },
            { cat: "Soft Skills & Leadership", name: "Dhamma School Prefect", inst: "", year: "-", img: "assets/certificates/leadership 1.png" }
        ];

        // Render Certifications grouped by Category
        const certContainer = document.getElementById('certifications-container');
        const categories = [...new Set(certData.map(c => c.cat))];

        // Ensure previously saved rotations are applied
        const getSavedRotation = (imgUrl) => parseInt(localStorage.getItem('rot_' + imgUrl) || '0');

        categories.forEach(category => {
            const categoryItems = certData.filter(c => c.cat === category);

            let html = `
                <div class="mb-12">
                    <h3 class="text-2xl font-bold text-white mb-6 border-b border-gray-700 pb-2">${category}</h3>
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
            `;

            categoryItems.forEach(item => {
                const initRot = getSavedRotation(item.img);
                html += `
                    <div class="bg-[#1f2937] border border-gray-700 rounded-xl overflow-hidden hover:border-primary transition duration-300 group cursor-pointer flex flex-col" onclick="openLightbox('${item.img}', '${item.name}')">
                        <div class="h-40 overflow-hidden relative bg-gray-900 flex items-center justify-center p-2">
                            <img src="${item.img}" alt="${item.name}" class="max-w-full max-h-full object-contain group-hover:scale-110 transition-transform duration-500" style="transform: rotate(${initRot}deg);">
                            <div class="absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 flex items-center justify-center transition-opacity duration-300">
                                <i class="fa-solid fa-expand text-white text-2xl"></i>
                            </div>
                        </div>
                        <div class="p-5 flex-grow flex flex-col">
                            <h4 class="text-lg font-bold text-white mb-1 line-clamp-2">${item.name}</h4>
                            <p class="text-xs text-primary font-medium mb-3">${item.inst}</p>
                            <div class="mt-auto flex justify-between items-center text-xs text-gray-400">
                                <span><i class="fa-regular fa-calendar mr-1"></i> ${item.year}</span>
                            </div>
                        </div>
                    </div>
                `;
            });

            html += `</div></div>`;
            certContainer.innerHTML += html;
        });

        // Lightbox Logic
        const lightbox = document.getElementById('lightbox');
        const lightboxImg = document.getElementById('lightbox-img');
        const lightboxCaption = document.getElementById('lightbox-caption');
        let currentRotation = 0;
        let currentImgUrl = '';

        function openLightbox(imgSrc, caption) {
            currentImgUrl = imgSrc;
            currentRotation = getSavedRotation(imgSrc);

            lightboxImg.src = imgSrc;
            lightboxCaption.innerText = caption;
            applyRotation();

            lightbox.classList.remove('hidden');
            setTimeout(() => lightbox.classList.remove('opacity-0'), 10);
            document.body.style.overflow = 'hidden';
        }

        function closeLightbox() {
            lightbox.classList.add('opacity-0');
            setTimeout(() => {
                lightbox.classList.add('hidden');
                document.body.style.overflow = '';
            }, 300);
        }

        function rotateLightbox(deg) {
            currentRotation += deg;
            localStorage.setItem('rot_' + currentImgUrl, currentRotation);
            applyRotation();

            // Re-render the miniature thumbnail outside automatically
            const allThumbs = document.querySelectorAll(`img[src="${currentImgUrl}"]`);
            allThumbs.forEach(t => t.style.transform = `rotate(${currentRotation}deg)`);
        }

        function applyRotation() {
            lightboxImg.style.transform = `rotate(${currentRotation}deg)`;
        }

        // Close when clicking outside
        lightbox.addEventListener('click', (e) => {
            if (e.target === lightbox) closeLightbox();
        });
    </script>
</body>

</html>